{"version":3,"file":"Header.js","names":["React","useContext","Responsive","CookiePolicyBanner","getLocale","injectIntl","intlShape","AppContext","APP_CONFIG_INITIALIZED","ensureConfig","mergeConfig","getConfig","subscribe","DesktopHeader","MobileHeader","messages","showGamification","process","env","ENABLE_RG_GAMIFICATION","toLowerCase","AUTHN_MINIMAL_HEADER","Header","_ref","intl","_useContext","authenticatedUser","config","mainMenu","type","href","concat","LMS_BASE_URL","content","formatMessage","gamificationItems","orderHistoryItem","ORDER_HISTORY_URL","userMenu","additionalClass","ACCOUNT_SETTINGS_URL","ACCOUNT_PROFILE_URL","username","target","SUPPORT_URL_DROPDOWN","LOGOUT_URL","splice","apply","loggedOutItems","LOGIN_URL","props","logo","LOGO_URL","logoAltText","SITE_NAME","logoDestination","loggedIn","avatar","ENABLE_COOKIE_POLICY_BANNER","undefined","createElement","Fragment","languageCode","maxWidth","minWidth","propTypes","isRequired"],"sources":["../src/Header.jsx"],"sourcesContent":["import React, { useContext } from 'react';\nimport Responsive from 'react-responsive';\n\nimport CookiePolicyBanner from '@edx/frontend-component-cookie-policy-banner';\nimport { getLocale, injectIntl, intlShape } from '@edx/frontend-platform/i18n';\nimport { AppContext } from '@edx/frontend-platform/react';\nimport {\n  APP_CONFIG_INITIALIZED,\n  ensureConfig,\n  mergeConfig,\n  getConfig,\n  subscribe,\n} from '@edx/frontend-platform';\n\nimport DesktopHeader from './DesktopHeader';\nimport MobileHeader from './MobileHeader';\n\nimport messages from './Header.messages';\n\nconst showGamification = process.env.ENABLE_RG_GAMIFICATION ? process.env.ENABLE_RG_GAMIFICATION.toLowerCase() === 'true' : null;\n\nensureConfig([\n  'LMS_BASE_URL',\n  'LOGOUT_URL',\n  'LOGIN_URL',\n  'SITE_NAME',\n  'LOGO_URL',\n  'ORDER_HISTORY_URL',\n], 'Header component');\n\nsubscribe(APP_CONFIG_INITIALIZED, () => {\n  mergeConfig({\n    AUTHN_MINIMAL_HEADER: !!process.env.AUTHN_MINIMAL_HEADER,\n  }, 'Header additional config');\n});\n\nconst Header = ({ intl }) => {\n  const { authenticatedUser, config } = useContext(AppContext);\n\n  const mainMenu = [\n    {\n      type: 'item',\n      href: `${config.LMS_BASE_URL}/dashboard`,\n      content: intl.formatMessage(messages['header.links.courses']),\n    },\n  ];\n\n  const gamificationItems = [\n    {\n      type: 'item',\n      href: `${config.LMS_BASE_URL}/gamma_dashboard/dashboard`,\n      content: intl.formatMessage(messages['header.menu.performance.label']),\n    },\n    {\n      type: 'item',\n      href: `${config.LMS_BASE_URL}/gamma_dashboard/leaderboard`,\n      content: intl.formatMessage(messages['header.menu.leaderboard.label']),\n    },\n  ];\n\n  const orderHistoryItem = {\n    type: 'item',\n    href: config.ORDER_HISTORY_URL,\n    content: intl.formatMessage(messages['header.user.menu.order.history']),\n  };\n\n  const userMenu = authenticatedUser === null ? [] : [\n    {\n      type: 'title',\n      additionalClass: 'with-border',\n      content: intl.formatMessage(messages['header.user.menu.dashboard']),\n    },\n    {\n      type: 'item',\n      href: `${config.LMS_BASE_URL}/dashboard`,\n      content: intl.formatMessage(messages['header.menu.my.courses']),\n    },\n    {\n      type: 'item',\n      href: `${config.LMS_BASE_URL}/programs`,\n      content: intl.formatMessage(messages['header.menu.my.programs']),\n    },\n    {\n      type: 'title',\n      additionalClass: 'with-border',\n      content: intl.formatMessage(messages['header.menu.manage.information.label']),\n    },\n    {\n      type: 'item',\n      href: config.ACCOUNT_SETTINGS_URL,\n      content: intl.formatMessage(messages['header.user.menu.my.account.settings']),\n    },\n    {\n      type: 'item',\n      href: `${config.ACCOUNT_PROFILE_URL}/u/${authenticatedUser.username}`,\n      content: intl.formatMessage(messages['header.user.menu.my.profile']),\n    },\n    {\n      type: 'item',\n      target: '_blank',\n      href: config.SUPPORT_URL_DROPDOWN,\n      content: intl.formatMessage(messages['header.menu.help.center']),\n    },\n    {\n      type: 'item',\n      href: config.LOGOUT_URL,\n      additionalClass: 'with-border',\n      content: intl.formatMessage(messages['header.user.menu.signout']),\n    },\n  ];\n\n  // Users should see gamification links only if it enabled.\n  if (showGamification) {\n    userMenu.splice(1, 0, ...gamificationItems);\n  }\n\n  // Users should only see Order History if have a ORDER_HISTORY_URL define in the environment.\n  if (config.ORDER_HISTORY_URL) {\n    userMenu.splice(-1, 0, orderHistoryItem);\n  }\n\n  const loggedOutItems = [\n    {\n      type: 'item',\n      href: config.LOGIN_URL,\n      content: intl.formatMessage(messages['header.user.menu.login']),\n    },\n    {\n      type: 'item',\n      href: `${config.LMS_BASE_URL}/register`,\n      content: intl.formatMessage(messages['header.user.menu.register']),\n    },\n  ];\n\n  const props = {\n    logo: config.LOGO_URL,\n    logoAltText: config.SITE_NAME,\n    logoDestination: `${config.LMS_BASE_URL}`,\n    loggedIn: authenticatedUser !== null,\n    username: authenticatedUser !== null ? authenticatedUser.username : null,\n    avatar: authenticatedUser !== null ? authenticatedUser.avatar : null,\n    mainMenu: getConfig().AUTHN_MINIMAL_HEADER ? [] : mainMenu,\n    userMenu: getConfig().AUTHN_MINIMAL_HEADER ? [] : userMenu,\n    loggedOutItems: getConfig().AUTHN_MINIMAL_HEADER ? [] : loggedOutItems,\n  };\n\n  const ENABLE_COOKIE_POLICY_BANNER = getConfig().ENABLE_COOKIE_POLICY_BANNER !== undefined\n    ? getConfig().ENABLE_COOKIE_POLICY_BANNER\n    : true;\n\n  return (\n    <>\n      {ENABLE_COOKIE_POLICY_BANNER ? <CookiePolicyBanner languageCode={getLocale()} /> : null}\n      <Responsive maxWidth={768}>\n        <MobileHeader {...props} />\n      </Responsive>\n      <Responsive minWidth={769}>\n        <DesktopHeader {...props} />\n      </Responsive>\n    </>\n  );\n};\n\nHeader.propTypes = {\n  intl: intlShape.isRequired,\n};\n\nexport default injectIntl(Header);\n"],"mappings":"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"}